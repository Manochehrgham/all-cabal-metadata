homepage: https://github.com/hjwylde/werewolf
changelog-type: markdown
hash: d2e84ab871539dbc3fce3fb878e627e25e7716389723d19befc372602835708a
test-bench-deps:
  werewolf: -any
  extra: ==1.4.*
  base: ! '>=4.8 && <5'
  text: ==1.2.*
  containers: ==0.5.*
  lens: ! '>=4.12 && <4.14'
  tasty-quickcheck: ==0.8.*
  mtl: ==2.2.*
  tasty: ! '>=0.10 && <0.12'
  QuickCheck: ==2.8.*
maintainer: public@hjwylde.com
synopsis: A game engine for running werewolf in a chat client
changelog: ! '## Changelog


  #### Upcoming


  #### v0.4.5.0


  *Minor*


  * Added the Wolf-hound role. ([#50](https://github.com/hjwylde/werewolf/issues/50))

  * Added a `version` command. ([#84](https://github.com/hjwylde/werewolf/issues/84))

  * Added the Wild-child role. ([#49](https://github.com/hjwylde/werewolf/issues/49))

  * Added the Angel role. ([#52](https://github.com/hjwylde/werewolf/issues/52))


  *Revisions*


  * Renamed the Villager role to Simple Villager.

  * Renamed the Werewolf role to Simple Werewolf.

  * Renamed the devourVoteCommand and lynchVoteCommand to voteDevourCommand and voteLynchCommand.
  ([#49](https://github.com/hjwylde/werewolf/issues/49))

  * Fixed `quit` to advance the stage when the only role for that stage has quit.


  #### v0.4.4.1


  *Revisions*


  * Fixed grammar for the `currentStageMessages`. ([#83](https://github.com/hjwylde/werewolf/issues/83))

  * Fixed the `heal` command help message to not require a `PLAYER` argument. ([#82](https://github.com/hjwylde/werewolf/issues/82))


  #### v0.4.4.0


  *Minor*


  * Removed `playerHealedMessage` and replaced with the generic `noPlayerDevouredMessage`.
  ([#80](https://github.com/hjwylde/werewolf/issues/80))

  * Removed `playerProtectedMessage` and replaced with the generic `noPlayerDevouredMessage`.
  ([#80](https://github.com/hjwylde/werewolf/issues/80))


  *Revisions*


  * Privatised underscore methods and changed old uses to using lens. ([#20](https://github.com/hjwylde/werewolf/issues/20))

  * Tidied up arbitrary instances by using `newtype`''s. ([#78](https://github.com/hjwylde/werewolf/issues/78))

  * Fixed the `noPlayerDevouredMessage` to be displayed after sunrise. ([#80](https://github.com/hjwylde/werewolf/issues/80))

  * Removed `Show` instance for `Command` and used `Blind`. ([#78](https://github.com/hjwylde/werewolf/issues/78))


  #### v0.4.3.2


  *Revisions*


  * Fixed grammar for the `currentStageMessages`. ([#83](https://github.com/hjwylde/werewolf/issues/83))

  * Fixed the `heal` command help message to not require a `PLAYER` argument. ([#82](https://github.com/hjwylde/werewolf/issues/82))


  #### v0.4.3.1


  *Revisions*


  * Added missing module to Cabal file.


  #### v0.4.3.0


  *Minor*


  * Added the Defender role. ([#38](https://github.com/hjwylde/werewolf/issues/38))


  #### v0.4.2.3


  *Revisions*


  * Fixed grammar for the `currentStageMessages`. ([#83](https://github.com/hjwylde/werewolf/issues/83))

  * Fixed the `heal` command help message to not require a `PLAYER` argument. ([#82](https://github.com/hjwylde/werewolf/issues/82))


  #### v0.4.2.2


  *Revisions*


  * Added missing module to Cabal file.


  #### v0.4.2.1


  *Revisions*


  * Fixed a bug causing the Witch being unable to heal themselves. ([#76](https://github.com/hjwylde/werewolf/issues/76))


  #### v0.4.2.0


  *Minor*


  * Added the Villager-Villager role. ([#37](https://github.com/hjwylde/werewolf/issues/37))


  #### v0.4.1.3


  *Revisions*


  * Fixed grammar for the `currentStageMessages`. ([#83](https://github.com/hjwylde/werewolf/issues/83))

  * Fixed the `heal` command help message to not require a `PLAYER` argument. ([#82](https://github.com/hjwylde/werewolf/issues/82))


  #### v0.4.1.2


  *Revisions*


  * Added missing module to Cabal file.


  #### v0.4.1.1


  *Revisions*


  * Fixed a bug causing the Witch being unable to heal themselves. ([#76](https://github.com/hjwylde/werewolf/issues/76))


  #### v0.4.1.0


  *Minor*


  * Added the Witch role. ([#5](https://github.com/hjwylde/werewolf/issues/5))


  #### v0.4.0.1


  *Revisions*


  * Fixed grammar for the `currentStageMessages`. ([#83](https://github.com/hjwylde/werewolf/issues/83))


  #### v0.4.0.0


  *Major*


  * Restricted count of special roles to 1. ([#32](https://github.com/hjwylde/werewolf/issues/32))

  * Changed private message structure to only ever be for a single player. ([#21](https://github.com/hjwylde/werewolf/issues/21))


  *Minor*


  * Renamed `turn` to `stage`. ([#70](https://github.com/hjwylde/werewolf/issues/70))

  * Renamed `VillagersTurn` to `VillagesTurn`. ([#70](https://github.com/hjwylde/werewolf/issues/70))

  * Added `events` to the game state. ([#71](https://github.com/hjwylde/werewolf/issues/71))

  * Added private pinging to the `ping` command. ([#69](https://github.com/hjwylde/werewolf/issues/69))

  * Restricted `end` to players in the current game. ([#74](https://github.com/hjwylde/werewolf/issues/74))


  #### v0.3.4.0


  *Minor*


  * Added a `ping` command. ([#64](https://github.com/hjwylde/werewolf/issues/64))


  *Revisions*


  * Added missing apostrophe to the new turn message. ([#63](https://github.com/hjwylde/werewolf/issues/63))

  * Changed the "Whom would you like to lynch?" text to be a public message displayed
  after the devoured message. ([#56](https://github.com/hjwylde/werewolf/issues/56))

  * Better prompt to action when villagers vote.

  * Changed devour vote messages to be sent immediately. ([#57](https://github.com/hjwylde/werewolf/issues/57))

  * Removed useless `only` function. ([#55](https://github.com/hjwylde/werewolf/issues/55))

  * Turned start of day and night into distinct turns.

  * Added private message to players when the game is over. ([#65](https://github.com/hjwylde/werewolf/issues/65))


  #### v0.3.3.2


  *Revisions*


  * Fixed missing file in Cabal file. ([#18](https://github.com/hjwylde/werewolf/issues/18))


  #### v0.3.3.1


  *Revisions*


  * Added `noIntersperse` to `interpret`. ([#60](https://github.com/hjwylde/werewolf/issues/60))


  #### v0.3.3.0


  *Minor*


  * Added a Scapegoat role. ([#40](https://github.com/hjwylde/werewolf/issues/40))

  * Added a `status` command. ([#18](https://github.com/hjwylde/werewolf/issues/18))


  *Revisions*


  * Added `--` to help description of `interpret`. ([#60](https://github.com/hjwylde/werewolf/issues/60))


  #### v0.3.2.0


  *Minor*


  * Added a "Whom would you like to lynch?" message during the Villagers'' turn. ([#25](https://github.com/hjwylde/werewolf/issues/25))

  * Allowed lowercase roles for `--extra-roles` in the `start` command. ([#33](https://github.com/hjwylde/werewolf/issues/33))


  *Revisions*


  * Shrunk some of the help text to make it more readable. ([#25](https://github.com/hjwylde/werewolf/issues/25))


  #### v0.3.1.3


  *Revisions*


  * Fixed a bug where Werewolves could devour other Werewolves. ([#34](https://github.com/hjwylde/werewolf/issues/34))

  * Changed Werewolf text from "kill" to "devour". ([#34](https://github.com/hjwylde/werewolf/issues/34))


  #### v0.3.1.2


  *Revisions*


  * Fixed dead werewolves being informed of votes. ([#24](https://github.com/hjwylde/werewolf/issues/24))


  #### v0.3.1.1


  *Revisions*


  * Tidied up the help text to be smaller. ([#26](https://github.com/hjwylde/werewolf/issues/26))

  * Fixed a bug where the turn was advanced to Werewolves when no Werewolves were
  alive. ([#26](https://github.com/hjwylde/werewolf/issues/26))


  #### v0.3.1.0


  *Minor*


  * Added a message to say the names of all the players at the start of a game. ([#23](https://github.com/hjwylde/werewolf/issues/23))

  * Added a message to say the roles in play at the start of a game. ([#16](https://github.com/hjwylde/werewolf/issues/16))


  #### v0.3.0.5


  *Revisions*


  * Fixed a bug where Werewolves could devour other Werewolves. ([#34](https://github.com/hjwylde/werewolf/issues/34))

  * Changed Werewolf text from "kill" to "devour". ([#34](https://github.com/hjwylde/werewolf/issues/34))


  #### v0.3.0.4


  *Revisions*


  * Fixed dead werewolves being informed of votes. ([#24](https://github.com/hjwylde/werewolf/issues/24))


  #### v0.3.0.3


  *Revisions*


  * Tidied up the help text to be smaller. ([#26](https://github.com/hjwylde/werewolf/issues/26))

  * Fixed a bug where the turn was advanced to Werewolves when no Werewolves were
  alive. ([#26](https://github.com/hjwylde/werewolf/issues/26))


  #### v0.3.0.2


  *Revisions*


  * Tidied up the help text to be smaller. ([#26](https://github.com/hjwylde/werewolf/issues/26))

  * Fixed a bug where the turn was advanced to Werewolves when no Werewolves were
  alive. ([#26](https://github.com/hjwylde/werewolf/issues/26))


  #### v0.3.0.1


  *Revisions*


  * Fixed `interpret` to display the commands help messages when given invalid arguments.
  ([#22](https://github.com/hjwylde/werewolf/issues/22))


  #### v0.3.0.0


  *Major*


  * Added `--extra-roles` option to `start`. ([#12](https://github.com/hjwylde/werewolf/issues/12))

  * Removed Seer from being included by default. ([#12](https://github.com/hjwylde/werewolf/issues/12))


  *Minor*


  * Allowed `start` to work when the game has ended but `end` hasn''t been called.
  ([#15](https://github.com/hjwylde/werewolf/issues/15))

  * Added `quit` command. ([#13](https://github.com/hjwylde/werewolf/issues/13))


  #### v0.2.0.2


  *Revisions*


  * Fixed dead werewolves being informed of votes. ([#24](https://github.com/hjwylde/werewolf/issues/24))


  #### v0.2.0.1


  *Revisions*


  * Tidied up the help text to be smaller. ([#26](https://github.com/hjwylde/werewolf/issues/26))

  * Fixed a bug where the turn was advanced to Werewolves when no Werewolves were
  alive. ([#26](https://github.com/hjwylde/werewolf/issues/26))


  #### v0.2.0.0


  *Major*


  * Added the Seer role. ([#4](https://github.com/hjwylde/werewolf/issues/4))

  * Removed the need to encode / decode to JSON for the state file. ([#9](https://github.com/hjwylde/werewolf/issues/9))


  #### v0.1.0.0


  *Major*


  * Initial implementation with Villagers and Werewolves. ([#1](https://github.com/hjwylde/werewolf/issues/1))

'
basic-deps:
  werewolf: -any
  MonadRandom: ==0.4.*
  extra: ==1.4.*
  base: ! '>=4.8 && <5'
  text: ==1.2.*
  filepath: ==1.4.*
  random-shuffle: -any
  containers: ==0.5.*
  lens: ! '>=4.12 && <4.14'
  mtl: ==2.2.*
  transformers: ==0.4.*
  optparse-applicative: ! '>=0.11 && <0.13'
  aeson: ! '>=0.8 && <0.11'
  directory: ==1.2.*
all-versions:
- '0.1.0.0'
- '0.2.0.0'
- '0.2.0.1'
- '0.2.0.2'
- '0.3.0.0'
- '0.3.0.1'
- '0.3.0.3'
- '0.3.0.4'
- '0.3.0.5'
- '0.3.1.0'
- '0.3.1.1'
- '0.3.1.2'
- '0.3.1.3'
- '0.3.2.0'
- '0.3.3.0'
- '0.3.3.1'
- '0.3.3.2'
- '0.3.4.0'
- '0.4.0.0'
- '0.4.0.1'
- '0.4.1.0'
- '0.4.1.1'
- '0.4.1.2'
- '0.4.1.3'
- '0.4.2.0'
- '0.4.2.1'
- '0.4.2.2'
- '0.4.2.3'
- '0.4.3.0'
- '0.4.3.1'
- '0.4.3.2'
- '0.4.4.0'
- '0.4.4.1'
- '0.4.5.0'
author: Henry J. Wylde
latest: '0.4.5.0'
description-type: markdown
description: ! "# werewolf\n\n[![Project Status: Wip - Initial development is in progress,
  but there has not yet been a stable, usable release suitable for the public.](http://www.repostatus.org/badges/1.0.0/wip.svg)](http://www.repostatus.org/#wip)\n[![Build
  Status](https://travis-ci.org/hjwylde/werewolf.svg?branch=master)](https://travis-ci.org/hjwylde/werewolf)\n[![Release](https://img.shields.io/github/release/hjwylde/werewolf.svg)](https://github.com/hjwylde/werewolf/releases/latest)\n\nA
  game engine for running werewolf in a chat client.\nThis engine is based off of
  [Werewolves of Millers Hollow](http://www.games-wiki.org/wiki/Werewolves_of_Millers_Hollow/).\n\n###
  Game description\n\nDeep in the American countryside, the little town of Millers
  Hollow has recently been infiltrated by Werewolves.\nEach night, murders are committed
  by the Villagers, who due to some mysterious phenomenon (possibly the greenhouse
  effect) have become Werewolves.\nIt is now time to take control and eliminate this
  ancient evil, before the town loses its last few inhabitants.\n\nObjective of the
  Game:  \nFor the Angel: die in the first round.  \nFor the Villagers: lynch all
  of the Werewolves.  \nFor the Werewolves: devour all of the Villagers.\n\n#### Roles\n\nThe
  current implemented roles are:\n* Angel.\n* Defender.\n* Scapegoat.\n* Seer.\n*
  Simple Villager.\n* Simple Werewolf.\n* Villager-Villager.\n* Wild-child.\n* Witch.\n*
  Wolf-hound.\n\n### Installing\n\nInstalling werewolf is easiest done using either\n
  \   [stack](https://github.com/commercialhaskell/stack) (recommended) or\n    [Cabal](https://github.com/haskell/cabal).\n\n**Using
  stack:**\n\n```bash\nstack install werewolf\nexport PATH=$PATH:~/.local/bin\n```\n\n**Using
  Cabal:**\n\n```bash\ncabal-install werewolf\nexport PATH=$PATH:~/.cabal/bin\n```\n\n###
  Usage\n\nThis section covers how a chat client interacts with the werewolf game
  engine.\n\nAll werewolf commands are designed to be run by a user from the chat
  client.\nE.g., to start a game:\n```bash\n> werewolf --caller @foo start --extra-roles
  seer @bar @baz @qux @quux @corge @grault\n{\"ok\":true,\"messages\":[\n    {\"to\":null,\"message\":\"A
  new game of werewolf is starting with @foo, @bar, @baz, @qux, @quux, @corge, @grault!\"},\n
  \   {\"to\":null,\"message\":\"The roles in play are Seer (1), Simple Villager (4),
  Simple Werewolf (2).\"},\n    {\"to\":\"@foo\",\"message\":\"You're a Simple Werewolf,
  along with @baz.\\nA shapeshifting townsperson that, at night, hunts the residents
  of Millers Hollow.\"},\n    ...,\n    {\"to\":null,\"message\":\"Night falls, the
  village is asleep.\"},\n    {\"to\":null,\"message\":\"The Seer wakes up.\"},\n
  \   {\"to\":\"@qux\",\"message\":\"Whose allegiance would you like to see?\"}\n
  \   ]}\n```\n\nIn this example, user _@foo_ ran the `start` command with the player
  names as arguments.\nNote that the calling user, _@foo_ was passed in to the `--caller`
  option.\nAll commands require this option.\n\nAny command ran returns a JSON result.\nThe
  result contains a boolean for whether the command was successful and a list of messages.\nThe
  `to` header on a message may either be `null`---for a public message---or have an
  intended\n    recipient.\n\nIt's the Seer's turn now.\n```bash\n> werewolf --caller
  @qux see @grault\n{\"ok\":true,\"messages\":[\n    {\"to\":\"@qux\",\"message\":\"@grault
  is aligned with the Villagers.\"},\n    {\"to\":null,\"message\":\"The Werewolves
  wake up, recognise one another and choose a new victim.\"},\n    {\"to\":\"@foo\",\"message\":\"Whom
  would you like to devour?\"},\n    {\"to\":\"@baz\",\"message\":\"Whom would you
  like to devour?\"}\n    ]}\n```\n\nLet's have the Werewolves, _@foo_ and _@baz_,
  vote to devour a Villager.\n```bash\n> werewolf --caller @foo vote @bar\n{\"ok\":true,\"messages\":[\n
  \   {\"to\":\"@baz\",\"message\":\"@foo voted to devour @bar.\"}\n    ]}\n> werewolf
  --caller @baz vote @bar\n{\"ok\":true,\"messages\":[\n    {\"to\":\"@foo\",\"message\":\"@baz
  voted to devour @bar.\"},\n    {\"to\":null,\"message\":\"The sun rises. Everybody
  wakes up and opens their eyes...\"},\n    {\"to\":null,\"message\":\"As you open
  them you notice a door broken down and @bar's guts half devoured and spilling out
  over the cobblestones. From the look of their personal effects, you deduce they
  were a Simple Villager.\"},\n    {\"to\":null,\"message\":\"As the village gathers
  in the town square the town clerk calls for a vote.\"},\n    {\"to\":null,\"message\":\"Whom
  would you like to lynch?\"}\n    ]}\n```\n\nToo bad for _@bar_. Maybe the village
  can get some vengeance...\n```bash\n> werewolf --caller @qux vote @foo\n{\"ok\":true,\"messages\":[]}\n```\n\nThis
  time, even though the command was successful, there are no messages.\n\n```bash\n>
  werewolf --caller @qux vote @foo\n{\"ok\":false,\"messages\":[{\"to\":[\"@qux\"],\"message\":\"You've
  already voted!\"}]}\n```\n\nHere the command was unsuccessful and an error message
  is sent to _@qux_.\nEven though the command was unsuccessful, the chat client interface
  probably won't need to do\n    anything special.\nRelaying the error message back
  to the user should suffice.\n\nThus a chat client interface must implement the following:\n*
  The ability to call werewolf commands. This includes passing the `--caller` option
  and arguments\n  correctly. It is possible to only implement the `interpret` command,
  which interprets the\n  caller's input.\n* The ability to send resultant messages.
  Resultant messages may be to everyone or to a specific\n  user.\n\n#### Commands\n\nSee
  `werewolf --help`.\n\n#### Chat clients\n\n**Coming soon:**\n* Slack\n"
license-name: BSD3
