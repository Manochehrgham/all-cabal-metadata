homepage: https://github.com/nfjinjing/moesocks
changelog-type: markdown
hash: 9fcd2c0d70374e8df4cda4edeca3700ed8fb4a1f06c8937f4cd545ad908fa181
test-bench-deps: {}
maintainer: Jinjing Wang <nfjinjing@gmail.com>
synopsis: A functional firewall killer
changelog: ! "1.0.0.10\n--------\n* Add `forbidden_IPs` field in `config.json`\n*
  Use \n  [Reserved IP addresses](https://en.wikipedia.org/wiki/Reserved_IP_addresses)\n
  \ as the default value for `forbidden_IPs`\n* Add `show-default-config` to options\n\n1.0.0.1\n-------\n*
  Default to no buffer, rely on buffer in the kernel. Add force Explicit\n  Congestion
  Notification in Readme.\n\n1.0.0.0\n-------\n* Tag a stable release, clean up types\n\n0.1.2.30\n--------\n*
  Refactor internal to make a runtime independent of Config and Options\n\n0.1.2.20\n--------\n*
  Fix IPv6, finally tested on a real IPv6 network..\n\n0.1.2.10\n-------\n* Fix not
  parsing snake case in config, a bug introduced in 0.1.2.0\n\n0.1.2.0\n-------\n\n*
  Add OSX compatibility, still some unfixed bugs on OSX. \n* Fix a bug that breaks
  UDP forwarding in local\n\n0.1.1.32\n--------\n* Add a runtime type\n\n0.1.1.31\n--------\n*
  Fix hardcoded encryption method\n\n0.1.1.30\n--------\n* Add more encryption methods
  from OpenSSL\n* Add a `--list-methods` flag to show all supported encryption methods\n\n0.1.1.20\n--------\n*
  Implement TFO in remote. \n\n0.1.1.10\n--------\n* Add TCP Fast Open (TFO) capability.
  \n\n0.1.1.0\n-------\n* Use TCP_NOTSENT_LOWAT option to reduce latency\n\n0.1.0.27\n--------\n*
  Make local respect `forbidden-ip` as well, this reduce unnecessary connections\n
  \ to the remote.\n* Clean up logging.\n\n0.1.0.26\n--------\n* Enable CIDR format
  in `forbidden-ip`.\n\n0.1.0.25\n--------\n* Add `forbidden-ip` option, which defaults
  to `127.0.0.1`, to prevent misuse\n  of remote. This is again a feature ported from
  ss.\n\n0.1.0.24\n--------\n* Make obfuscation flush upper bound configurable in
  `config.json`.\n* Fix an IPv6 name resolution bug in remote.\n\n0.1.0.23\n---------\n*
  Fix a bug to prevent a half closed connection to hold a file handle.\n\n0.1.0.22\n--------\n*
  Add the `-o` flag to turn on simple obfuscation (randomly flush socket to vary\n
  \ packet length). There is about a 10-20% performance cost.\n\n0.1.0.21\n--------\n*
  Add in README that `GHC 7.10.2` is a must!\n\n0.1.0.20\n--------\n* Rewrite Encrypt
  module, cache password hash.\n\n0.1.0.19\n--------\n* Fix a memory leak.\n\n0.1.0.18\n--------\n*
  Add complete command line arguments.\n\n0.1.0.17\n--------\n* Add `--disable-socks5`
  flag to switch off the SOCKS5 service on local.\n\n0.1.0.16\n--------\n* Add compatibility
  with ss for UDP port forwarding.\n\n0.1.0.15\n--------\n* Add UDP port forwarding.\n\n0.1.0.14\n--------\n*
  Add IPv6 support.\n"
basic-deps:
  bytestring: -any
  lens-aeson: -any
  unix: -any
  stm: -any
  base: ! '>4 && <=5'
  time: -any
  unordered-containers: -any
  text: -any
  strict: -any
  network: -any
  async: -any
  containers: -any
  lens: -any
  binary: -any
  hslogger: -any
  mtl: -any
  iproute: -any
  attoparsec: -any
  transformers: -any
  optparse-applicative: -any
  random: -any
  HsOpenSSL: -any
  aeson: -any
  cryptohash: -any
all-versions:
- '0.1.0.0'
- '0.1.0.1'
- '0.1.0.2'
- '0.1.0.3'
- '0.1.0.4'
- '0.1.0.5'
- '0.1.0.6'
- '0.1.0.7'
- '0.1.0.8'
- '0.1.0.9'
- '0.1.0.10'
- '0.1.0.11'
- '0.1.0.12'
- '0.1.0.13'
- '0.1.0.14'
- '0.1.0.15'
- '0.1.0.16'
- '0.1.0.17'
- '0.1.0.18'
- '0.1.0.19'
- '0.1.0.20'
- '0.1.0.21'
- '0.1.0.22'
- '0.1.0.23'
- '0.1.0.24'
- '0.1.0.25'
- '0.1.0.26'
- '0.1.0.27'
- '0.1.1.0'
- '0.1.1.10'
- '0.1.1.20'
- '0.1.1.30'
- '0.1.1.31'
- '0.1.1.32'
- '0.1.2.0'
- '0.1.2.10'
- '0.1.2.20'
- '0.1.2.30'
- '1.0.0.0'
- '1.0.0.1'
- '1.0.0.10'
author: Jinjing Wang
latest: '1.0.0.10'
description-type: markdown
description: ! "MoeSocks\n========\n\nA SOCKS5 proxy using the client / server architecture.\n\nMoeSocks
  is greatly inspired by [ss] and can be used in place of it.\n\nInstallation\n============\n\n*
  Need `GHC 7.10.2` on Unix.\n\nUsage\n=====\n\n* Download a sample [config.json]
  to your current path\n\n* Edit `config.json` to fit your setup (at least the `remoteHost`
  and `password`\n  fields)\n\n* Start a remote node outside a firewall:\n\n        moesocks
  --role remote -c config.json\n\n* Start a local node inside a firewall:\n\n        moesocks
  --role local -c config.json\n\n* Now you have a SOCKS5 proxy running inside a firewall
  using port\n  `localPort`.\n\n* SS compatible obfuscation can be turned on with
  the `-o` flag to make\n  statistical analysis on packet length a bit more confusing.\n\n*
  See more options:\n\n        moesocks --help\n\n* You might want to run `moesocks`
  under some kind of a supervising daemon to\n  auto restart the program if it crashes,
  likely due to [#10590], the fix of\n  which was not included in the `7.10.2` release.\n\n*
  On `OSX`, If you only run `moesocks -r local`, then it should work. Occasional\n
  \ manual restart should be expected. `fastOpen` field should be `false` for now.\n\n\nFeatures\n========\n\n*
  SOCKS5 proxy service, obviously\n* TCP port forwarding\n* UDP port forwarding, for
  example `-U 5300:8.8.8.8:53`\n* TCP per connection throttling (as a side effect
  of trying to find a bug in the\nremote)\n* SOCKS5 service on local can be turned
  off\n* Understand ss' configuration file\n\nDrawbacks\n==========\n\n* UDP over
  SOCKS5 is not implemented.\n* TCP bind over SOCKS5 is not implemented* More then
  2 times slower then the original Python implementation (measured at\n* More then
  2 times slower then the original Python implementation (measured at\n  20M/s vs
  43M/s on an Intel P8800, using the AES-256-CFB method, in software\n  AES).\n* Currently
  only works on Linux.\n\n\nTCP Fast Open (TFO)\n====================\n\n## [TFO]
  means faster response in this case\n\nBoth local and remote will use TFO when instructed.
  If the browser in use and\nthe website to visit both support TFO, you can enjoy
  TFO all the way through.\nThis could lead to a huge reduction of latency.\n\n##
  Enable TFO in your OS runtime.\n\nOn Linux 3.7+, to check the availability of TFO:\n\n
  \   cat /proc/sys/net/ipv4/tcp_fastopen\n\nOn Linux 3.7+, to enable TFO (as root):\n\n
  \   echo 3 > /proc/sys/net/ipv4/tcp_fastopen\n\n## Enable TFO in MoeSocks\n\nTFO
  can be turned on by adding a `\"fastOpen\":true` field in `config.json` or\nspecifying
  a `--fast-open` flag in the command line arguments.\n\n## Verify\n\nUse `tcpdump`
  on the `remotePort`, check for that `SYN` should start to carry\npayload. An example
  command is:\n\n    tcpdump port 8388 -i any -X -v\n\nExplicit Congestion Notification
  ([ECN])\n=========================================\n\n## No buffer by default\n\nAfter
  version v1.0.0.0, moesocks will default to no buffer at the application\nlevel.
  Smart buffer is expected from the kernel.\n\nIn app buffer can still be tuned on
  by setting \"tcpBufferSize\" in\n`config.json` a value greater then 1.\n\n## Force
  ECN\n\nOn Linux 2.4.20+ (as root)\n\n    echo 1 > /proc/sys/net/ipv4/tcp_ecn\n\nECN
  is recommended on both `local` and `remote`.\n\nCredits\n=======\n\n* [ss] greatly
  inspired MoeSocks.\n* [ss-haskell] another implementation of ss in Haskell, also
  greatly inspired\n  MoeSocks. Much of the understanding of the internal of ss was
  gained by\n  reading ss-haskell.\n\nLicense\n=======\n\nCopyright 2015 Jinjing Wang\n\nLicensed
  under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file
  except in compliance with the License.\nYou may obtain a copy of the License at\n\n
  \  http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law
  or agreed to in writing, software\ndistributed under the License is distributed
  on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
  or implied.\nSee the License for the specific language governing permissions and\nlimitations
  under the License.\n\n[ss]:https://github.com/shadowsocks/shadowsocks\n[ss-haskell]:https://github.com/rnons/shadowsocks-haskell\n[config.json]:https://raw.githubusercontent.com/nfjinjing/moesocks/master/config.json\n[#10590]:https://ghc.haskell.org/trac/ghc/ticket/10590\n[TFO]:https://en.wikipedia.org/wiki/TCP_Fast_Open\n[ECN]:https://en.wikipedia.org/wiki/Explicit_Congestion_Notification\n\n"
license-name: Apache-2.0
