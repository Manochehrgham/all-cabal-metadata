homepage: https://github.com/mjakob/hgrib
changelog-type: markdown
hash: 6aeb170bf5f89b46dbc86e3121027dce85533139fb9441223c727631a0e70192
test-bench-deps:
  base: ! '>=4.5 && <4.9'
  hspec: ==2.1.*
  hgrib: -any
  directory: ! '>=1.1 && <1.3'
maintainer: mjakob422@gmail.com
synopsis: Unofficial bindings for GRIB API
changelog: ! "# HGrib Change Log\n\n## 0.2.0.0\n\n* Extended the compatible version
  range of GRIB API and the Haskell\n  base library.\n\n* Added a `gribGetApiVersion`
  function to `Data.Grib.Raw`.\n\n* Included the `Data.Grib.Raw.Exception` module
  in `Data.Grib.Raw` and\n  removed the marshal function `withGribMultiHandle`.\n\n*
  Removed\n\n  * `gribContextSetMemoryProc`\n  * `gribContextSetPersistentMemoryProc`\n
  \ * `gribContextSetBufferMemoryProc`\n  * `gribContextSetPrintingProc`\n  * `gribContextSetLoggingProc`\n\n
  \ and corresponding foreign function type definitions from\n  `Data.Grib.Raw` to
  be able to mark all remaining functions _unsafe_\n  from a FFI perspective.\n\n*
  Marked all foreign imports _unsafe_.\n\n* Integrated the source code repository
  with [Travis CI][].\n\n* Abandoned the plans to include the full GRIB API in `grib_api.h`\n
  \ (but requests to include specific parts are welcome).\n\n\n## 0.1.0.0\n\n* Initial
  release.\n\n\n[Travis CI]: https://travis-ci.org/mjakob/hgrib\n"
basic-deps:
  base: ! '>=4.5 && <4.9'
  hgrib: -any
all-versions:
- '0.1.0.0'
- '0.2.0.0'
author: Mattias Jakobsson
latest: '0.2.0.0'
description-type: markdown
description: ! "# HGrib\n\n[![Build Status](https://travis-ci.org/mjakob/hgrib.svg?branch=develop)](https://travis-ci.org/mjakob/hgrib)\n\nUnofficial
  bindings for [ECMWF][]'s [GRIB API][] library for reading\n[WMO FM-92 GRIB][] edition
  1 and edition 2 messages.\n\nIn this version of HGrib, raw bindings for the [documented][GRIB
  Docs]\npart of GRIB API is available.  Future versions are intended to\ninclude
  a higher-level Haskell interface.\n\n\n## Installation\n\nThe following prerequisites
  are needed to build HGrib:\n\n  * [GRIB API][] >= 1.12 installed and discoverable
  by ghc (use\n    cabal's `--extra-include-dirs` and `--extra-lib-dirs` if it's\n
  \   installed at a custom location); and\n\n  * Haskell [base][] >= 4.5; and\n\n
  \ * [c2hs][] == 0.26.*.\n\nWith these requirements available, HGrib can be installed
  from\n[Hackage][] with [Cabal][]:\n\n```\ncabal install hgrib\n```\n\n\n## Usage\n\nRight
  now, only raw bindings for the [documented][GRIB Docs] part of\nGRIB API is available
  in `Data.Grib.Raw`.  Much of the documentation\nis copied into HGrib's [reference
  documentation][HGrib Docs] generated\nby [Haddock][].  To be able to work with these
  bindings, bindings for\nC's `fopen` is provided in `Data.Grib.Raw.CFile` (which
  is re-exported\nby `Data.Grib.Raw`).  An example of usage is GRIB API's\n[get.c][GRIB
  Get] example re-written with HGrib's bindings:\n\n```haskell\nimport Control.Exception
  (assert)\nimport Data.Grib.Raw\nimport Foreign           (allocaArray, allocaBytes)\nimport
  Text.Printf       (printf)\n\n\nfilename :: FilePath\nfilename = \"test/stage/regular_latlon_surface.grib1\"\n\nassertIO
  :: Bool -> IO ()\nassertIO = flip assert $ return ()\n\nmain :: IO ()\nmain = do\n
  \ h <- withBinaryCFile filename ReadMode $\n         gribHandleNewFromFile defaultGribContext\n\n
  \ _ <- gribSetString h \"file\" filename\n\n  gribGetLong h \"Ni\" >>= printf \"numberOfPointsAlongAParallel=%d\\n\"\n
  \ gribGetLong h \"Nj\" >>= printf \"numberOfPointsAlongAMeridian=%d\\n\"\n\n  gribGetDouble
  h \"yFirst\" >>= printf \"latitudeOfFirstGridPointInDegrees=%g\\n\"\n  gribGetDouble
  h \"xFirst\" >>= printf \"longitudeOfFirstGridPointInDegrees=%g\\n\"\n  gribGetDouble
  h \"yLast\"  >>= printf \"latitudeOfLastGridPointInDegrees=%g\\n\"\n  gribGetDouble
  h \"xLast\"  >>= printf \"longitudeOfLastGridPointInDegrees=%g\\n\"\n  gribGetDouble
  h \"DyInDegrees\" >>= printf \"jDirectionIncrementInDegrees=%g\\n\"\n  gribGetDouble
  h \"DxInDegrees\" >>= printf \"iDirectionIncrementInDegrees=%g\\n\"\n\n  len <-
  gribGetLength h \"packingType\"\n  allocaBytes len $ \\bufr -> do\n    packingType
  <- gribGetString h \"packingType\" bufr len\n    printf \"packingType=%s (%d)\\n\"
  packingType (length packingType + 1)\n\n  size <- gribGetSize h \"values\"\n  allocaArray
  size $ \\array -> do\n    values <- gribGetDoubleArray h \"values\" array size\n
  \   let average = sum values / (fromIntegral . length $ values)\n    printf \"There
  are %d values, average is %g\\n\" size average\n\n  len' <- gribGetLength h \"file\"\n
  \ assertIO $ len' == 1 + length filename\n  allocaBytes len' $ \\bufr' -> do\n    file
  <- gribGetString h \"file\" bufr' len'\n    assertIO $ file == filename\n```\n\n\n##
  Contributing\n\nIssues and pull requests are most welcome!  In particular, let me
  know\nif there is any undocumented part of GRIB API that you would like to\nhave
  included.\n\n\n## Licenses\n\nHGrib was created and is currently maintained by\n[Mattias
  Jakobsson][].  It is released under the\n[GNU General Public License v3.0][GPL3].
  \ ECMWF's GRIB API is released\nunder the [Apache license][].  **HGrib is in no
  way associated with\nECMWF or the original library.**\n\n\n[Apache license]:    https://software.ecmwf.int/wiki/display/GRIB/License\n[base]:
  \             http://hackage.haskell.org/package/base\n[c2hs]:              https://github.com/haskell/c2hs\n[Cabal]:
  \            https://www.haskell.org/cabal/\n[ECMWF]:             http://www.ecmwf.int/\n[GPL3]:
  \             http://www.gnu.org/licenses/gpl-3.0.html\n[GRIB API]:          https://software.ecmwf.int/wiki/display/GRIB/Home\n[GRIB
  Docs]:         https://software.ecmwf.int/wiki/display/GRIB/Module+Index\n[GRIB
  Get]:          https://software.ecmwf.int/wiki/display/GRIB/get.c\n[Hackage]:           http://hackage.haskell.org/\n[Haddock]:
  \          https://www.haskell.org/haddock/\n[HGRIB Docs]:        https://hackage.haskell.org/package/hgrib\n[Mattias
  Jakobsson]: https://github.com/mjakob\n[WMO FM-92 GRIB]:    http://www.wmo.int/pages/prog/www/WMOCodes/Guides/GRIB/Introduction_GRIB1-GRIB2.pdf\n"
license-name: GPL-3
