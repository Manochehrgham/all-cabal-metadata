changelog-type: ''
hash: 02a744a7fac0373612b556841ee7a2e88aa7e943a753e0211684f586ab97f4c2
synopsis: Third cake the Makefile EDSL
changelog: ''
all-versions:
- '0.1.0.0'
- '0.2.1.0'
- '0.3.0.0'
- '0.3.0.1'
- '0.4.0.0'
- '0.5.0.0'
- '0.5.1.0'
- '0.5.2.0'
- '0.6.0'
latest: '0.6.0'
description-type: haddock
description: ! 'Cake3 is a EDSL for building Makefiles, written in Haskell. With cake3,

  developer can write their build logic in Haskell, obtain clean and safe Makefile

  and distribute it among the non-Haskell-aware users. Currenly, GNU Make is

  the only backend supported.


  /Example program/


  > module Cakefile where

  >

  > import Development.Cake3

  > import Cakefile_P

  >

  > cs = map file ["main.c", "second.c"]

  >

  > main = writeMake (file "Makefile") $ do

  >   selfUpdate

  >   d <- rule $ do

  >     shell [cmd|gcc -M $cs -MF @(file "depend.mk")|]

  >   os <- forM cs $ \c -> do

  >     rule $ do

  >       shell [cmd| gcc -c $(extvar "CFLAGS") -o @(c.="o") $c |]

  >   elf <- rule $ do

  >     shell [cmd| gcc -o @(file "main.elf") $os |]

  >   rule $ do

  >     phony "all"

  >     depend elf

  >   includeMakefile d


  /Basic workflow/


  * Install the cake3


  * Create Cakefile.hs in the project root


  * Build the application using cake3 script provided


  * Execute the application to obtain the Makefile


  See the README on the GitHub <https://github.com/grwlf/cake3> for more

  information. Distribution contains several example projects.'
